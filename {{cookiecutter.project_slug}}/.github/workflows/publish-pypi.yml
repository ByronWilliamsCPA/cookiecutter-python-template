# Publish to PyPI - Calls Org-Level Reusable Workflow
# This is a lightweight caller workflow that invokes the organization's
# shared PyPI publishing workflow with OIDC trusted publishing.
{% if cookiecutter.include_github_actions == "yes" -%}
name: Publish to PyPI

on:
  release:
    types: [published]
  workflow_dispatch:
    inputs:
      test-pypi:
        description: 'Publish to Test PyPI instead of PyPI'
        type: boolean
        required: false
        default: false

jobs:
  publish:
    name: Publish Package
    uses: {{ cookiecutter.github_org_or_user }}/.github/.github/workflows/python-publish-pypi.yml@main
    with:
      python-version: '{{ cookiecutter.python_version }}'
      package-name: '{{ cookiecutter.pypi_package_name }}'
      test-pypi: {% raw %}${{ github.event.inputs.test-pypi || false }}{% endraw %}

permissions:
  contents: read
  id-token: write  # Required for OIDC trusted publishing
{% endif -%}
